<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>è­šä»”ï½œä½ç¢³ AI å»ºè­° Demoï¼ˆå‹å–„ä»‹é¢ï¼‰</title>
  <style>
    :root{
      --bg: #fffefb;
      --card: #ffffff;
      --text: #222;
      --muted: #6b7280;
      --brand: #2563eb;
      --brand-weak: #dbeafe;
      --good: #10b981;
      --warn: #f59e0b;
      --bad: #ef4444;
      --radius: 14px;
      --shadow: 0 8px 24px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"Noto Sans CJK TC",sans-serif;}
    h1,h2,h3{margin:0 0 .5rem 0}
    p{margin:.25rem 0}
    a{color:var(--brand)}

    /* App shell */
    .app{
      max-width: 980px;
      margin: 0 auto;
      padding: 16px;
    }
    header.appbar{
      position: sticky; top: 0; z-index: 10;
      background: linear-gradient(180deg,#fff,rgba(255,255,255,.7));
      backdrop-filter: saturate(1.2) blur(10px);
      border-bottom: 1px solid #eee;
    }
    .appbar-inner{
      display:flex;align-items:center;gap:12px; padding: 12px 8px;
    }
    .brand{display:flex;align-items:center;gap:8px;font-weight:700}
    .brand-badge{display:inline-grid;place-items:center;width:36px;height:36px;border-radius:9px;background:linear-gradient(135deg,#34d399,#60a5fa);color:#fff;font-weight:800}
    .spacer{flex:1}
    .navbtn{appearance:none;border:1px solid #e5e7eb;background:#fff;padding:8px 12px;border-radius:10px;cursor:pointer;font-size:14px}
    .navbtn:focus{outline:3px solid var(--brand-weak)}

    /* Cards & layout */
    .grid{display:grid;gap:16px}
    @media(min-width: 760px){ .grid-2{grid-template-columns: 1.2fr .8fr} }
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}
    .section-title{display:flex;align-items:center;gap:8px;margin-bottom:8px}
    .hint{color:var(--muted);font-size:14px}

    /* Inputs */
    .option{display:flex;align-items:center;gap:10px;padding:10px 12px;border:1px solid #eee;border-radius:10px;cursor:pointer}
    .option:hover{background:#fafafa}
    .group{display:grid;gap:10px}
    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{padding:6px 10px;border-radius:999px;border:1px dashed #ddd;font-size:12px;color:var(--muted)}

    /* Buttons */
    .btn{appearance:none;border:none;background:var(--brand);color:#fff;padding:12px 16px;border-radius:12px;cursor:pointer;font-weight:600;box-shadow:var(--shadow)}
    .btn.secondary{background:#fff;color:var(--brand);border:1px solid var(--brand)}
    .btn:active{transform:translateY(1px)}

    /* Suggestion panel */
    #suggestion{background: linear-gradient(135deg,#ecfeff,#f0fdf4);border:1px solid #dcfce7;border-radius:12px;padding:12px}
    #suggestion .title{font-weight:700;display:flex;align-items:center;gap:8px}
    #suggestion .title .badge{background:#111;color:#fff;border-radius:8px;padding:2px 8px;font-size:12px}
    #suggestion ul{margin:.25rem 0 .5rem 1.25rem}
    #suggestion .tipline{font-size:14px;color:#065f46}

    /* Score page */
    .score-row{display:flex;align-items:center;gap:16px;flex-wrap:wrap}
    #graph{width:220px;height:220px;border-radius:50%;background-image:conic-gradient(#3b82f6,#3b82f6 90deg,#fde047 90deg);box-shadow:var(--shadow)}
    .score-info{flex:1}
    table{width:100%;border-collapse:collapse}
    th,td{border-bottom:1px solid #eee;padding:10px;text-align:left}
    th{background:#fafafa}

    /* Pages */
    .page{display:none}
    .page.active{display:block}

    /* Accessibility focus */
    input:focus-visible{outline:2px solid var(--brand)}
  </style>
</head>
<body>
  <header class="appbar" role="banner">
    <div class="appbar-inner app">
      <div class="brand" aria-label="è­šä»” ä½ç¢³ AI å»ºè­°">
        <div class="brand-badge" aria-hidden="true">è­š</div>
        è­šä»” Â· ä½ç¢³ AI å»ºè­°
      </div>
      <div class="spacer"></div>
      <button class="navbtn" onclick="showPage('food_menu')">èœå–®</button>
      <button class="navbtn" onclick="showPage('statspage')">ç©åˆ†</button>
      <button class="navbtn" onclick="showPage('login')">ç™»å‡º</button>
    </div>
  </header>

  <main class="app">
    <!-- Login Page -->
    <section id="login" class="page active" aria-labelledby="login-title">
      <div class="card" style="text-align:center">
        <h1 id="login-title">æ­¡è¿å›ä¾† ğŸ‘‹</h1>
        <p class="hint">ç”¨æ‰‹æ©Ÿè™Ÿç¢¼å¿«é€Ÿç™»å…¥</p>
        <div style="display:flex;gap:8px;justify-content:center;margin:16px 0">
          <input id="pn" value="XXXX_XXXX" aria-label="é›»è©±è™Ÿç¢¼" style="padding:12px 14px;border:1px solid #e5e7eb;border-radius:12px;min-width:260px"/>
          <button class="btn" onclick="redirect('login','food_menu')">ç™»å…¥</button>
        </div>
        <div class="chips">
          <span class="chip">ğŸ¯ ä½ç¢³é¸æ“‡è³ºç©åˆ†</span>
          <span class="chip">ğŸŒ¿ å³æ™‚ AI å»ºè­°</span>
          <span class="chip">ğŸœ å€‹äººåŒ–é…æ­</span>
        </div>
      </div>
    </section>

    <!-- Menu Page -->
    <section id="food_menu" class="page" aria-labelledby="menu-title">
      <div class="grid grid-2">
        <div class="card">
          <div class="section-title"><h2 id="menu-title">èœå–®</h2><span class="hint">å‹¾é¸é…èœå³å¯ç²å¾— AI å»ºè­°</span></div>

          <h3>â‘  é¢åº•</h3>
          <div class="group" role="radiogroup" aria-label="é¢åº•">
            <label class="option"><input type="radio" id="rice-n" name="noodle"> ç±³ç·š</label>
            <label class="option"><input type="radio" id="potato-n" name="noodle"> ç´…è–¯ç²‰</label>
          </div>

          <h3 style="margin-top:14px">â‘¡ é…èœ</h3>
          <div class="group" aria-label="é…èœ">
            <label class="option"><input type="checkbox" id="lettuce"> ğŸ¥¬ ç”Ÿèœï¼ˆä½ç¢³ï¼‰</label>
            <label class="option"><input type="checkbox" id="fishball"> ğŸŸ é­šè›‹ï¼ˆä½ç¢³ï¼‰</label>
            <label class="option"><input type="checkbox" id="beef"> ğŸ¥© ç‰›è‚‰</label>
            <label class="option"><input type="checkbox" id="mushroom"> ğŸ„ é®®è‡ï¼ˆä½ç¢³ï¼‰</label>
            <label class="option"><input type="checkbox" id="ham"> ğŸ¥“ ç«è…¿</label>
            <label class="option"><input type="checkbox" id="mincedpork"> ğŸ«˜ ç‚¸é†¬</label>
          </div>

          <h3 style="margin-top:14px">â‘¢ æ¹¯åº•</h3>
          <div class="group" role="radiogroup" aria-label="æ¹¯åº•">
            <label class="option"><input type="radio" id="clear_s" name="soup"> æ¸…æ¹¯</label>
            <label class="option"><input type="radio" id="tomato_s" name="soup"> ç•ªèŒ„æ¿ƒæ¹¯</label>
            <label class="option"><input type="radio" id="spicy_s" name="soup"> éº»è¾£</label>
            <label class="option"><input type="radio" id="sousp_s" name="soup"> é…¸è¾£æ¹¯</label>
          </div>

          <div style="display:flex;gap:8px;margin-top:18px">
            <button class="btn" onclick="nextp_and_bonus(['beef','ham','mincedpork'])">é»é¤</button>
            <button class="btn secondary" onclick="resetMenu()">é‡è¨­</button>
          </div>
        </div>

        <!-- Live AI Suggestion -->
        <aside class="card" aria-live="polite" aria-atomic="true">
          <div id="suggestion">
            <div class="title"><span class="badge">AI</span> æ¨è–¦</div>
            <p class="tipline">å‹¾é¸é…èœå¾Œï¼Œé€™è£¡æœƒå³æ™‚æä¾›æ›´ä½ç¢³çš„æ›¿ä»£é…æ­ã€‚</p>
            <ul id="suggestionList" class="c3"></ul>
          </div>
        </aside>
      </div>
    </section>

    <!-- Other Bonus Page -->
    <section id="otherbonus" class="page" aria-labelledby="ob-title">
      <div class="card">
        <h2 id="ob-title">ä½ å€‘æœ‰è‡ªå‚™é¤å…·å—ï¼Ÿ</h2>
        <div class="group" style="margin:10px 0 16px">
          <label class="option"><input type="radio" id="yes" name="ownc"> æœ‰</label>
          <label class="option"><input type="radio" id="no"  name="ownc"> æ²’æœ‰</label>
        </div>
        <button class="btn" onclick="addbonus()">æäº¤</button>
      </div>
    </section>

    <!-- Leftover Page -->
    <section id="leftover" class="page" aria-labelledby="leftover-title">
      <div class="card">
        <h2 id="leftover-title">è«‹è¼¸å…¥å»šé¤˜çš„è³ªé‡ï¼ˆgï¼‰</h2>
        <div style="display:flex;gap:10px;align-items:center;margin:10px 0 16px">
          <input id="leftovermass" inputmode="numeric" pattern="[0-9]*" placeholder="ä¾‹å¦‚ï¼š50" style="padding:12px 14px;border:1px solid #e5e7eb;border-radius:12px;min-width:160px" />
          <button class="btn" onclick="bonus2()">æäº¤</button>
        </div>
        <p class="hint">â‰¤ 100g å¯å†ç²å¾— 50 åˆ†</p>
      </div>
    </section>

    <!-- Stats Page -->
    <section id="statspage" class="page" aria-labelledby="stats-title">
      <div class="card">
        <h2 id="stats-title">ç”¨æˆ¶ç©åˆ†</h2>
        <div class="score-row" style="margin-top:10px">
          <div id="graph" role="img" aria-label="ç›®å‰é€²åº¦åœ“å½¢åœ–"></div>
          <div class="score-info">
            <p id="goalmessage" style="font-size:18px;font-weight:700">è·é›¢ä¸‹ä¸€å€‹ç›®æ¨™ï¼šâ€”</p>
            <div id="goalsheet" style="margin-top:10px"></div>
            <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
              <button class="btn" onclick="showPage('food_menu')">å›å»é»é¤</button>
              <button class="btn secondary" onclick="showPage('login')">ç™»å‡º</button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    let bonus=0;
    const targetlist=[500,1000,2500,5000];
    const rewardslist=["äºŒåå…ƒæŠ˜æ‰£","äº”æŠ˜å„ªæƒ ","è´ˆé€ä¸€å€‹ç¢—","å…è²»éºµä¸€ç¢—"];

    // ---------- Navigation ----------
    function showPage(id){
      document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      if(id==='food_menu') updateAISuggestion();
    }
    function redirect(hide,show){ showPage(show); }

    // ---------- Score & Graph ----------
    function deltabonus(delta){
      bonus+=delta;
      let k=0; while(k < targetlist.length-1 && targetlist[k] <= bonus) k++;
      const targetpoint = targetlist[k] || targetlist[targetlist.length-1];
      const graph_deg = Math.max(0, Math.min(360, (bonus/targetpoint)*360));
      document.getElementById('goalmessage').innerText = `è·é›¢ä¸‹ä¸€å€‹ç›®æ¨™ï¼š${Math.max(0,targetpoint-bonus)}/${targetpoint}`;
      document.getElementById('graph').style.backgroundImage = `conic-gradient(#3b82f6,#3b82f6 ${graph_deg}deg,#fde047 ${graph_deg}deg)`;
    }

    function displaygoal(target,rewards){
      let goaltext = '<table><tr><th>ç›®æ¨™åˆ†æ•¸</th><th>çå‹µ</th></tr>';
      for(let i=0;i<target.length;i++){
        goaltext += `<tr><td>${target[i]}</td><td>${rewards[i]}</td></tr>`;
      }
      goaltext += '</table>';
      document.getElementById('goalsheet').innerHTML = goaltext;
    }

    // ---------- Live AI Suggestion ----------
    function updateAISuggestion(){
      const sList = document.getElementById('suggestionList');
      const picked = {
        lettuce: document.getElementById('lettuce')?.checked,
        fishball: document.getElementById('fishball')?.checked,
        beef: document.getElementById('beef')?.checked,
        mushroom: document.getElementById('mushroom')?.checked,
        ham: document.getElementById('ham')?.checked,
        mincedpork: document.getElementById('mincedpork')?.checked
      };
      const tips=[];
      if(picked.beef){ tips.push('ä½ å¯ä»¥æ”¹ç”¨é›è‚‰ï¼Œç›¸æ¯”ç‰›è‚‰å¯æ¸›å°‘ç´„ 60% ç¢³æ’ï¼Œå‘³é“ç›¸ä¼¼å–”ï¼æˆ–æ”¹é¸é­šè›‹ï¼é®®è‡ä¹Ÿæ›´ä½ç¢³ã€‚'); }
      if(picked.ham){ tips.push('ç«è…¿å±¬æ–¼åŠ å·¥è‚‰é¡ï¼Œå»ºè­°æ”¹é¸é®®è‡æˆ–ç”Ÿèœæ›´ç’°ä¿ï¼'); }
      if(picked.mincedpork){ tips.push('ç‚¸é†¬å±¬æ–¼è¼ƒé«˜ç¢³æ’è±¬è‚‰é¡ï¼Œå¯ä»¥æ”¹é¸é­šè›‹ï¼Œæˆ–åŠ å¤šä¸€ä»½è”¬èœé™ä½å½±éŸ¿ã€‚'); }
      const low = (picked.lettuce||picked.fishball||picked.mushroom);
      if(!picked.beef && !picked.ham && !picked.mincedpork && low){ tips.push('å¾ˆæ£’ï¼ä½ å·²é¸äº†ä½ç¢³é…èœï¼ˆå¦‚ç”Ÿèœï¼é­šè›‹ï¼é®®è‡ï¼‰ã€‚'); }
      sList.innerHTML = tips.length ? tips.map(t=>`<li>${t}</li>`).join('') : '<li class="c3">å‹¾é¸é…èœå¾Œï¼ŒAI æœƒåœ¨é€™è£¡æä¾›æ›´ä½ç¢³æ›¿ä»£å»ºè­°ã€‚</li>';
    }

    // Bind change events once DOM is ready
    window.addEventListener('DOMContentLoaded', () => {
      ['lettuce','fishball','beef','mushroom','ham','mincedpork'].forEach(id => {
        const el = document.getElementById(id);
        if(el) el.addEventListener('change', updateAISuggestion);
      });
      displaygoal(targetlist,rewardslist);
      updateAISuggestion();
    });

    // ---------- Flow actions ----------
    function nextp_and_bonus(badfood){
      updateAISuggestion();
      let foodcheck=true; for(const id of badfood){ if(document.getElementById(id).checked) foodcheck=false; }
      if(foodcheck) deltabonus(100);
      showPage('otherbonus');
    }
    function addbonus(){ if(document.getElementById('yes').checked){ deltabonus(50); } showPage('leftover'); }
    function bonus2(){
      const mass = parseFloat(document.getElementById('leftovermass').value||'0');
      if(mass<=100){ deltabonus(50); }
      showPage('statspage');
    }

    function resetMenu(){
      ['lettuce','fishball','beef','mushroom','ham','mincedpork','rice-n','potato-n','clear_s','tomato_s','spicy_s','sousp_s'].forEach(id=>{
        const el=document.getElementById(id); if(el) el.checked=false;
      });
      updateAISuggestion();
    }
  </script>
</body>
</html>